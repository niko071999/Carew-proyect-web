@model IEnumerable<SistemaCajaRegistradora.Models.Usuario>
@{
    ViewBag.Title = "Listado de usuarios";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Topbar  -->
<nav class="navbar navbar-expand navbar-light bg-white mb-4 topbar shadow">

    <!-- Sidebar Toggle (Topbar) -->
    <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
        <i class="fa fa-bars"></i>
    </button>

    <!-- Topbar Navbar -->
    <!-- Topbar Navbar -->
    <ul class="navbar-nav ml-auto">

        <!-- Nav Item - User Information -->
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <span id="text_nameuser" class="mr-2 d-none d-md-inline text-gray-600 fw-bold">Cargando...</span>
                <img id="img_user" class="img-profile rounded-circle img-fluid"
                     src="~/Assets/images/blank-profile.png">
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <li><a id="linksChangePass" class="dropdown-item" href="javascript:;">Cambiar contraseña</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a id="linksignout" class="dropdown-item text-danger" href="javascript:;">Cerrar sesion</a></li>
            </ul>
        </li>
    </ul>
</nav>
<!-- End of Topbar -->
<!-- Begin Page Content -->
<div class="container-fluid">
    <!-- Page Heading -->
    <div class="row justify-content-between">
        <div class="col-4">
            <h1 class="h3 mb-4 text-gray-800">@ViewBag.Title</h1>
        </div>
        <div class="col-4">
            <div class="d-grid gap-2 mb-2">
                <button class="btn btn-primary" onclick="AgregarForms('@Url.Action("AgregarForms","Usuario")')" type="button">
                    <i class="fas fa-plus"></i>
                    Agregar usuario
                </button>
            </div>
        </div>
    </div>
    @if (Model.Count() > 0)
    {
        <div class="row">
            <div class="col-12 table-responsive">
                <table id="table" class="table table-bordered table-hover display table-sm">
                    <thead>
                        <tr>
                            <th scope="col">Foto usuario</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Apellido</th>
                            <th scope="col">Nombre de usuario</th>
                            <th scope="col">Rol</th>
                            <th scope="col">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var u in Model)
                        {
                            <tr>
                                <td>
                                    <a href="javascript:void(0);" onclick="formsImagenU('@Url.Action("formsImagen", "Usuario")',@u.id)">
                                        <img class="rounded mx-auto d-block" src="@u.rutaImg" alt="Imagen del usuario"
                                             style="width: 80px; min-width: 50px; min-height: 50px; height: 80px;" />
                                    </a>
                                </td>
                                <td class="align-middle">@u.nombre</td>
                                <td class="align-middle">@u.apellido</td>
                                <td class="align-middle">@u.nombreUsuario</td>
                                <td class="align-middle">@u.Role.rol</td>
                                <td class="align-middle">
                                    <button class="btn btn-warning" type="button" onclick="formsEditar('@Url.Action("formsEditar", "Usuario")',@u.id)"
                                            data-bs-toggle="tooltip" title="Editar usuario">
                                        <i class="fas fa-pen float-left"></i>
                                    </button>
                                    <button class="btn btn-secondary" type="button" onclick="obtenerCodigoBarra('@u.id')"
                                            data-bs-toggle="tooltip" title="Obtener codigo de barra de acceso">
                                        <i class="fas fa-barcode float-left"></i>
                                    </button>
                                    @if (!u.nombreUsuario.Equals(ViewBag.nombreUser))
                                    {
                                        <button class="btn btn-danger" type="button" onclick="formsEliminar('@Url.Action("formsEliminar", "Usuario")', @u.id)"
                                                data-bs-toggle="tooltip" title="Eliminar usuario">
                                            <i class="fas fa-trash float-left"></i>
                                        </button>
                                    }
                                    @if (u.solrespass == true)
                                    {
                                        <button onclick="restablecerClave('@u.nombreUsuario.Trim()')" class="btn btn-dark" type="button"
                                                data-bs-toggle="tooltip" title="Restablecer clave de acceso">
                                            <i class="fas fa-key float-left"></i>
                                        </button>
                                    }
                                </td>
                            </tr>

                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>

<!-- Modal core base-->
<div class="modal fade" id="coreModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">

</div>

<script type="text/javascript" title="main">
    
</script>